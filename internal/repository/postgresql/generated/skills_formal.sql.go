// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: skills_formal.sql

package postgresql

import (
	"context"
	"time"

	"github.com/google/uuid"
)

const getFormalSkillsByProfessionAndDate = `-- name: GetFormalSkillsByProfessionAndDate :many
SELECT skill, count
FROM skill_formal
WHERE profession_id = $1
  AND scraped_at_id = $2
ORDER BY count DESC
`

type GetFormalSkillsByProfessionAndDateParams struct {
	ProfessionID uuid.UUID `json:"profession_id"`
	ScrapedAtID  uuid.UUID `json:"scraped_at_id"`
}

type GetFormalSkillsByProfessionAndDateRow struct {
	Skill string `json:"skill"`
	Count int32  `json:"count"`
}

func (q *Queries) GetFormalSkillsByProfessionAndDate(ctx context.Context, arg GetFormalSkillsByProfessionAndDateParams) ([]GetFormalSkillsByProfessionAndDateRow, error) {
	rows, err := q.db.Query(ctx, getFormalSkillsByProfessionAndDate, arg.ProfessionID, arg.ScrapedAtID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []GetFormalSkillsByProfessionAndDateRow
	for rows.Next() {
		var i GetFormalSkillsByProfessionAndDateRow
		if err := rows.Scan(&i.Skill, &i.Count); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getFormalSkillsWithDatesByProfessionAndDateRange = `-- name: GetFormalSkillsWithDatesByProfessionAndDateRange :many
SELECT s.skill, s.count, sc.scraped_at
FROM skill_formal s
         JOIN scraping sc ON s.scraped_at_id = sc.id
WHERE s.profession_id = $1
  AND sc.scraped_at BETWEEN $2 AND $3
ORDER BY sc.scraped_at ASC
`

type GetFormalSkillsWithDatesByProfessionAndDateRangeParams struct {
	ProfessionID uuid.UUID `json:"profession_id"`
	ScrapedAt    time.Time `json:"scraped_at"`
	ScrapedAt_2  time.Time `json:"scraped_at_2"`
}

type GetFormalSkillsWithDatesByProfessionAndDateRangeRow struct {
	Skill     string    `json:"skill"`
	Count     int32     `json:"count"`
	ScrapedAt time.Time `json:"scraped_at"`
}

func (q *Queries) GetFormalSkillsWithDatesByProfessionAndDateRange(ctx context.Context, arg GetFormalSkillsWithDatesByProfessionAndDateRangeParams) ([]GetFormalSkillsWithDatesByProfessionAndDateRangeRow, error) {
	rows, err := q.db.Query(ctx, getFormalSkillsWithDatesByProfessionAndDateRange, arg.ProfessionID, arg.ScrapedAt, arg.ScrapedAt_2)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []GetFormalSkillsWithDatesByProfessionAndDateRangeRow
	for rows.Next() {
		var i GetFormalSkillsWithDatesByProfessionAndDateRangeRow
		if err := rows.Scan(&i.Skill, &i.Count, &i.ScrapedAt); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getFormalSkillsWithDatesByProfessionsAndDateRange = `-- name: GetFormalSkillsWithDatesByProfessionsAndDateRange :many
SELECT s.profession_id, s.skill, s.count, sc.scraped_at
FROM skill_formal s
         JOIN scraping sc ON s.scraped_at_id = sc.id
WHERE s.profession_id = ANY ($1::uuid[])
  AND sc.scraped_at BETWEEN $2 AND $3
ORDER BY s.profession_id, sc.scraped_at
`

type GetFormalSkillsWithDatesByProfessionsAndDateRangeParams struct {
	Column1     []uuid.UUID `json:"column_1"`
	ScrapedAt   time.Time   `json:"scraped_at"`
	ScrapedAt_2 time.Time   `json:"scraped_at_2"`
}

type GetFormalSkillsWithDatesByProfessionsAndDateRangeRow struct {
	ProfessionID uuid.UUID `json:"profession_id"`
	Skill        string    `json:"skill"`
	Count        int32     `json:"count"`
	ScrapedAt    time.Time `json:"scraped_at"`
}

func (q *Queries) GetFormalSkillsWithDatesByProfessionsAndDateRange(ctx context.Context, arg GetFormalSkillsWithDatesByProfessionsAndDateRangeParams) ([]GetFormalSkillsWithDatesByProfessionsAndDateRangeRow, error) {
	rows, err := q.db.Query(ctx, getFormalSkillsWithDatesByProfessionsAndDateRange, arg.Column1, arg.ScrapedAt, arg.ScrapedAt_2)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []GetFormalSkillsWithDatesByProfessionsAndDateRangeRow
	for rows.Next() {
		var i GetFormalSkillsWithDatesByProfessionsAndDateRangeRow
		if err := rows.Scan(
			&i.ProfessionID,
			&i.Skill,
			&i.Count,
			&i.ScrapedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

type InsertFormalSkillsParams struct {
	ProfessionID uuid.UUID `json:"profession_id"`
	Skill        string    `json:"skill"`
	Count        int32     `json:"count"`
	ScrapedAtID  uuid.UUID `json:"scraped_at_id"`
}
