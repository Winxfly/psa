// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: skills_extracted.sql

package postgresql

import (
	"context"
	"time"

	"github.com/google/uuid"
)

const getExtractedSkillsByProfessionAndDate = `-- name: GetExtractedSkillsByProfessionAndDate :many
SELECT skill, count
FROM skill_extracted
WHERE profession_id = $1
  AND scraped_at_id = $2
ORDER BY count DESC
`

type GetExtractedSkillsByProfessionAndDateParams struct {
	ProfessionID uuid.UUID `json:"profession_id"`
	ScrapedAtID  uuid.UUID `json:"scraped_at_id"`
}

type GetExtractedSkillsByProfessionAndDateRow struct {
	Skill string `json:"skill"`
	Count int32  `json:"count"`
}

func (q *Queries) GetExtractedSkillsByProfessionAndDate(ctx context.Context, arg GetExtractedSkillsByProfessionAndDateParams) ([]GetExtractedSkillsByProfessionAndDateRow, error) {
	rows, err := q.db.Query(ctx, getExtractedSkillsByProfessionAndDate, arg.ProfessionID, arg.ScrapedAtID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []GetExtractedSkillsByProfessionAndDateRow
	for rows.Next() {
		var i GetExtractedSkillsByProfessionAndDateRow
		if err := rows.Scan(&i.Skill, &i.Count); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getExtractedSkillsWithDatesByProfessionAndDateRange = `-- name: GetExtractedSkillsWithDatesByProfessionAndDateRange :many
SELECT s.skill, s.count, sc.scraped_at
FROM skill_extracted s
         JOIN scraping sc ON s.scraped_at_id = sc.id
WHERE s.profession_id = $1
  AND sc.scraped_at BETWEEN $2 AND $3
ORDER BY sc.scraped_at ASC
`

type GetExtractedSkillsWithDatesByProfessionAndDateRangeParams struct {
	ProfessionID uuid.UUID `json:"profession_id"`
	ScrapedAt    time.Time `json:"scraped_at"`
	ScrapedAt_2  time.Time `json:"scraped_at_2"`
}

type GetExtractedSkillsWithDatesByProfessionAndDateRangeRow struct {
	Skill     string    `json:"skill"`
	Count     int32     `json:"count"`
	ScrapedAt time.Time `json:"scraped_at"`
}

func (q *Queries) GetExtractedSkillsWithDatesByProfessionAndDateRange(ctx context.Context, arg GetExtractedSkillsWithDatesByProfessionAndDateRangeParams) ([]GetExtractedSkillsWithDatesByProfessionAndDateRangeRow, error) {
	rows, err := q.db.Query(ctx, getExtractedSkillsWithDatesByProfessionAndDateRange, arg.ProfessionID, arg.ScrapedAt, arg.ScrapedAt_2)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []GetExtractedSkillsWithDatesByProfessionAndDateRangeRow
	for rows.Next() {
		var i GetExtractedSkillsWithDatesByProfessionAndDateRangeRow
		if err := rows.Scan(&i.Skill, &i.Count, &i.ScrapedAt); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getExtractedSkillsWithDatesByProfessionsAndDateRange = `-- name: GetExtractedSkillsWithDatesByProfessionsAndDateRange :many
SELECT s.profession_id, s.skill, s.count, sc.scraped_at
FROM skill_extracted s
         JOIN scraping sc ON s.scraped_at_id = sc.id
WHERE s.profession_id = ANY ($1::uuid[])
  AND sc.scraped_at BETWEEN $2 AND $3
ORDER BY s.profession_id, sc.scraped_at
`

type GetExtractedSkillsWithDatesByProfessionsAndDateRangeParams struct {
	Column1     []uuid.UUID `json:"column_1"`
	ScrapedAt   time.Time   `json:"scraped_at"`
	ScrapedAt_2 time.Time   `json:"scraped_at_2"`
}

type GetExtractedSkillsWithDatesByProfessionsAndDateRangeRow struct {
	ProfessionID uuid.UUID `json:"profession_id"`
	Skill        string    `json:"skill"`
	Count        int32     `json:"count"`
	ScrapedAt    time.Time `json:"scraped_at"`
}

func (q *Queries) GetExtractedSkillsWithDatesByProfessionsAndDateRange(ctx context.Context, arg GetExtractedSkillsWithDatesByProfessionsAndDateRangeParams) ([]GetExtractedSkillsWithDatesByProfessionsAndDateRangeRow, error) {
	rows, err := q.db.Query(ctx, getExtractedSkillsWithDatesByProfessionsAndDateRange, arg.Column1, arg.ScrapedAt, arg.ScrapedAt_2)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []GetExtractedSkillsWithDatesByProfessionsAndDateRangeRow
	for rows.Next() {
		var i GetExtractedSkillsWithDatesByProfessionsAndDateRangeRow
		if err := rows.Scan(
			&i.ProfessionID,
			&i.Skill,
			&i.Count,
			&i.ScrapedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

type InsertExtractedSkillsParams struct {
	ProfessionID uuid.UUID `json:"profession_id"`
	Skill        string    `json:"skill"`
	Count        int32     `json:"count"`
	ScrapedAtID  uuid.UUID `json:"scraped_at_id"`
}
